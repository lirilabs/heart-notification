<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Send Mail</title>

  <!-- Firebase Auth ONLY -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

  <style>
    body {
      background: #0d0d0d;
      color: #fff;
      font-family: system-ui;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .card {
      width: 340px;
      background: #1a1a1a;
      padding: 20px;
      border-radius: 12px;
    }
    input, textarea, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      border: none;
    }
    button {
      background: #ff4d6d;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div class="card">
  <h3>Send Email</h3>

  <input id="to" placeholder="To Email" />
  <input id="subject" placeholder="Subject" />
  <textarea id="text" placeholder="Message"></textarea>

  <button onclick="send()">Send</button>
</div>

<script>
  /* ========= Firebase Init ========= */
  firebase.initializeApp({
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID"
  });

  /* ========= Send ========= */
  async function send() {
    const user = firebase.auth().currentUser;
    if (!user) {
      alert("Login required");
      return;
    }

    const token = await user.getIdToken();

    const payload = {
      to: document.getElementById("to").value,
      subject: document.getElementById("subject").value,
      text: document.getElementById("text").value
    };

    const res = await fetch(
      "https://heart-notification.vercel.app",
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${token}`
        },
        body: JSON.stringify(payload)
      }
    );

    const data = await res.json();

    if (data.success) {
      alert("Mail sent ✅");
    } else {
      alert(data.error || "Failed ❌");
    }
  }
</script>

</body>
</html>
